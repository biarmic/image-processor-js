<!DOCTYPE html>
<html>

<head>
    <title>
        Image Processor
    </title>
</head>

<body onload="resize(); loadImage();" onresize="resize()">
    <link rel="stylesheet" href="style.css">
    <div id="top-container">
        ImageProcessorJS
    </div>
    <div id="bottom-container">
        <div class="container" style="width: 30%;">
            <div class="option-box">
                <div class="option-title">
                    <b>Image</b>
                </div>
                <div class="option-select">
                    <input type="file" id="img-loader" accept="image/jpeg, image/png" onchange="Canvas.updateImage()">
                </div>
            </div>
            <div class="option-box">
                <div class="option-title">
                    <b>Filter</b>
                </div>
                <div class="option-select">
                    <select id="filter-select" onchange="updateOptions(); Canvas.drawImage();">
                        <option value="original" selected>No filter</option>
                        <option value="flip">Flip</option>
                        <option value="grayscale">Grayscale</option>
                        <option value="monochrome">Monochrome</option>
                        <option value="dichrome">Dichrome</option>
                        <option value="glass">Glass</option>
                        <option value="posterize">Posterize</option>
                    </select>
                </div>
            </div>
            <div class="option-box">
                <div class="option-title">
                    <b>Bit Depth</b>
                </div>
                <div class="option-select">
                    <input type="range" id="bit-depth" min="1" max="8" value="8" oninput="Canvas.drawImage()"></input>
                </div>
            </div>
            <div class="option-group">
                <div class="option-box">
                    <div class="option-title">
                        <b>Axis</b>
                    </div>
                    <div class="option-box">
                        <select id="flip-axis" onchange="Canvas.drawImage();">
                            <option value="vertical" selected>Vertical</option>
                            <option value="horizontal">Horizontal</option>
                            <option value="both">Both</option>
                        </select>
                    </div>
                </div>
            </div>
            <div class="option-group" id="grayscale-group">
                <div class="option-box">
                    <div class="option-title">
                        <b>Mode</b>
                    </div>
                    <div class="option-box">
                        <select id="grayscale-mode" onchange="updateOptions(); Canvas.drawImage();">
                            <option value="desaturation" selected>Desaturation</option>
                            <option value="average">Average</option>
                            <option value="luminance">Luminance</option>
                            <option value="decomposition">Decomposition</option>
                            <option value="single-color">Single Color</option>
                        </select>
                    </div>
                </div>
            </div>
            <div class="option-group">
                <div class="option-box">
                    <div class="option-title">
                        <b>Color</b>
                    </div>
                    <div class="option-box">
                        <select id="monochrome-mode" onchange="Canvas.drawImage();">
                            <option value="red" selected>Red</option>
                            <option value="green">Green</option>
                            <option value="blue">Blue</option>
                        </select>
                    </div>
                </div>
            </div>
            <div class="option-group">
                <div class="option-box">
                    <div class="option-title">
                        <b>Colors</b>
                    </div>
                    <div class="option-box">
                        <select id="dichrome-mode" onchange="Canvas.drawImage();">
                            <option value="blue" selected>Red and Green</option>
                            <option value="green">Red and Blue</option>
                            <option value="red">Green and Blue</option>
                        </select>
                    </div>
                </div>
            </div>
            <div class="option-group">
                <div class="option-box">
                    <div class="option-title">
                        <b>Glass Thickness</b>
                    </div>
                    <div class="option-box">
                        <input type="range" id="glass-thickness" min="0" max="50" value="10"
                            oninput="Canvas.drawImage()"></input>
                    </div>
                </div>
            </div>
            <div class="option-group">
                <div class="option-box">
                    <div class="option-title">
                        <b>Channel Depth</b>
                    </div>
                    <div class="option-box">
                        <input type="range" id="posterize-depth" min="1" max="256" value="64"
                            oninput="Canvas.drawImage()"></input>
                    </div>
                </div>
            </div>
            <div class="option-group" id="decomposition-group">
                <div class="option-box">
                    <div class="option-title">
                        <b>Decomposition Mode</b>
                    </div>
                    <div class="option-box">
                        <select id="decomposition-mode" onchange="Canvas.drawImage();">
                            <option value="max" selected>Maximum</option>
                            <option value="min">Minimum</option>
                        </select>
                    </div>
                </div>
            </div>
            <div class="option-group" id="single-color-group">
                <div class="option-box">
                    <div class="option-title">
                        <b>Color Mode</b>
                    </div>
                    <div class="option-box">
                        <select id="single-color-mode" onchange="Canvas.drawImage();">
                            <option value="red" selected>Red</option>
                            <option value="green">Green</option>
                            <option value="blue">Blue</option>
                        </select>
                    </div>
                </div>
            </div>
        </div>
        <div class="container" style="width: 70%;">
            <canvas id="main-canvas"></canvas>
        </div>
    </div>
    <script src="src/scripts/textFit.js"></script>
    <script src="src/scripts/Algorithm.js"></script>
    <script src="src/scripts/Canvas.js"></script>
    <script>
        function resize() {
            textFit(document.getElementById("top-container"), { alignVert: true, alignHoriz: true });
            var container = document.getElementsByClassName("container")[1];
            Canvas.resize(container.offsetWidth, container.offsetHeight);
        }

        function updateOptions() {
            var groups = document.getElementsByClassName("option-group");
            for (var i = 0; i < groups.length; i++) {
                groups[i].classList.remove("active");
            }
            var filter = document.getElementById("filter-select");
            if (filter.selectedIndex > 0) {
                groups[filter.selectedIndex - 1].classList.add("active");
                if (groups[filter.selectedIndex - 1].id == "grayscale-group" && document.getElementById("grayscale-mode").value == "decomposition") {
                    document.getElementById("decomposition-group").classList.add("active");
                } else if (groups[filter.selectedIndex - 1].id == "grayscale-group" && document.getElementById("grayscale-mode").value == "single-color") {
                    document.getElementById("single-color-group").classList.add("active");
                }
            }
        }
    </script>
</body>

</html>